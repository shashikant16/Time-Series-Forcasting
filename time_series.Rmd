---
title: "time -series"
author: "shashikant dewangan"
date: "23 March 2018"
output: html_document
---

# to find the air fair for next 10 years based on my past reconrds
```{r}
plot(AirPassengers)
 # for checking the mean is constant or not we have to calclte it 

# here data is not stationlay  so mens are incressing and varincance are not samw
abline(reg = lm(AirPassengers~time(AirPassengers)))
# for checking he trend 

plot(aggregate(AirPassengers,FUN = mean))

data("AirPassengers")
class(AirPassengers)
# telling anout the daya is in time seris formant or not
start(AirPassengers)
end(AirPassengers)
# this are the star and end of my  time series data 

frequency(AirPassengers)
# this will tell you the cucle oof the time seris like a series of month
```
```{r}
summary(AirPassengers)

boxplot(AirPassengers~cycle(AirPassengers))
# it will tells us to how the passangers are travelling across the month 

plot((log(AirPassengers)))
# it will male the  varinanec the equal 
# one with we have to make stationary with time to make varince equal using [LOG ]
# second we need to address the tred componant and make the MEAN similer equal
plot(diff(log(AirPassengers)))
# this will make full stationay in mean and varianc wise

# NOW we can apply time series model on it lilke
#airma , holw winters

#AR I MA (AR auto regrerssibv I integration MA-moving avrgage)
# p d q
# ar based on my past data to predict my future
# MA see diffrent values and find average
# I to integgarte of all the things
acf(AirPassengers) # vale of Q (q)
# auto corelation function
acf(diff(log(AirPassengers)))
# Determins the values of q / we have to take the value of q how- chose the  Nthline which is not crossing the BLUE LINE and select the (Nth-1) line

pacf(diff(log(AirPassengers))) # P
# Detrmins the valurs of p
# for calculatng the p Value we have to calcluate the same as q value
# for D value we have to make the differantation if we do 1st timr my D value =1 and if we do differantation twice then d=2 like that my vales will moving onnn
# lets fint our arima model
fit=arima(log(AirPassengers),c(0,1,1),seasonal = list(order=c(0,1,1),period=12))

pred <- predict(fit,n.ahead = 10*12)

ts.plot(AirPassengers,2.718^pred$pred,log="y",lty=c(1,3))

# Testing of our moel
datawide <- ts(AirPassengers,frequency = 12,start = c(1949,1),end = c(1959,12))

fit <- arima(log(datawide),c(0,1,1),seasonal = list(order=c(0,1,1),period=12))

pred <- predict(fit,n.ahead = 10*12)

pred1 <- 2.718^pred$pred

data1 <- head(pred1,12)
predicted_1960 <- round(data1,digits = 0)
original_1960 <- tail(AirPassengers,12)

ts.plot(AirPassengers ,2.718^pred$pred,log="y",lty=c(1,3))
```

